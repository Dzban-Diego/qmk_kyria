#include QMK_KEYBOARD_H
#include <stdio.h>
char wpm_str[10];

// Zdefiniowanie warstw
#define DEF 0
#define SYS 1
#define MED 2
#define NAV 3
#define NPD 4
#define SPC 5
#define NUM 6

#define O_ALT OSM(MOD_RALT)
#define O_SFT OSM(MOD_LSFT)
#define M6_SPC LT(6, KC_SPC)

#define SS_1 SGUI(KC_1)
#define SS_2 SGUI(KC_2)
#define SS_3 SGUI(KC_3)
#define SS_4 SGUI(KC_4)
#define SS_5 SGUI(KC_5)

#define S_1 RGUI(KC_1)
#define S_2 RGUI(KC_2)
#define S_3 RGUI(KC_3)
#define S_4 RGUI(KC_4)
#define S_5 RGUI(KC_5)

#define S_PGUP RGUI(KC_PGUP)
#define S_BSLS RSFT(KC_BSLS)
#define SH_MINS RSFT(KC_MINS)
#define SH_1 RSFT(KC_1)
#define SH_2 RSFT(KC_2)
#define SH_3 RSFT(KC_3)
#define SH_4 RSFT(KC_4)
#define SH_5 RSFT(KC_5)
#define SH_6 RSFT(KC_6)
#define SH_7 RSFT(KC_7)
#define SH_8 RSFT(KC_8)
#define SH_9 RSFT(KC_9)

#define C_SLSH LCTL(KC_SLSH)
#define C_DOT LCTL(KC_DOT)

/*
 * H_xxx > Zmienia na warstwę xxx po przytrzymaniu (hold)
 * T_xxx > Zmienia na warstwę xxx po kliknięciu i na niej zostaje (toggle)
 * SS    > Shift + Super
 */

const uint16_t PROGMEM keymaps[][MATRIX_ROWS][MATRIX_COLS] = {
/* Domyślna warstwa Colemak_dh
 * ,-----------------------------------------------.                                  ,-----------------------------------------------.
 * |  ESC  |   Q   |   W   |   F   |   P   |   B   |                                  |   J   |   L   |   U   |   Y   |   :   |  DEL  |
 * |-------+-------+-------+-------+-------+-------|                                  |-------+-------+-------+-------+-------+-------|
 * |  TAB  |   A   |   R   |   S   |   T   |   G   |                                  |   M   |   N   |   E   |   I   |   O   |  BACK |
 * |-------+-------+-------+-------+-------+-------+---------------.  ,---------------+-------+-------+-------+-------+-------+-------|
 * | SHIFT |   X   |   C   |   D   |   Z   |   V   |  ESC  | T_SYS |  | H_NPD | T_NAV |   K   |   H   |  , <  | .  >  |  / ?  | RETURN|
 * `-----------------------+-------+-------+-------+-------+-------|  |-------+-------+-------+-------+-------+-----------------------'
 *                         |  ALT  |  SUP  |  ALT  | H_SYS |  CTRL |  | T_NPD | H_NAV | SPACE | H_SPC | H_MED |
 *                         |       |       |       |       |       |  |       |       | H_NUM |       |       |
 *                         `---------------------------------------'  `---------------------------------------'
 */
    [DEF] = LAYOUT(
        KC_ESC , KC_Q   , KC_W   , KC_F   , KC_P   , KC_B   , /*=====, =======, =======, ======*/ KC_J   , KC_L   , KC_U   , KC_Y   , KC_SCLN, KC_DEL ,
        KC_TAB , KC_A   , KC_R   , KC_S   , KC_T   , KC_G   , /*=====, =======, =======, ======*/ KC_M   , KC_N   , KC_E   , KC_I   , KC_O   , KC_BSPC,
        O_SFT  , KC_X   , KC_C   , KC_D   , KC_Z   , KC_V   , KC_ESC , TG(SYS), MO(NPD), TG(NAV), KC_K   , KC_H   , KC_COMM, KC_DOT , KC_SLSH, KC_ENT ,
        /*=====, =======, ======*/ O_ALT  , KC_LGUI, O_ALT  , MO(SYS), KC_LCTL, TG(NPD), MO(NAV), M6_SPC , MO(SPC), MO(MED)  /*=====, =======, ======*/
    ),

/*
 * Systemowa nawigacja
 * ,-----------------------------------------------.                                  ,-----------------------------------------------.
 * |  ESC  |  SS1  |  SS2  |  SS3  |  SS4  |  SS5  |                                  | PG_UP |  HOME |   UP  |  END  |  SUP  |  DEL  |
 * |       |       |       |       |       |       |                                  |       |       |       |       | PG_UP |       |
 * |-------+-------+-------+-------+-------+-------|                                  |-------+-------+-------+-------+-------+-------|
 * |  TAB  |  SUP1 |  SUP2 |  SUP3 |  SUP4 |  SUP5 |                                  | PG_DW |   *   |   @   |   >   |  - _  |  BACK |
 * |-------+-------+-------+-------+-------+-------+---------------.  ,---------------+-------+-------+-------+-------+-------+-------|
 * |  ???  |  SUP  | SHIFT |  CTRL |  ALT  |  ???  |  ESC  | T_SYS |  | H_NPD |  ???  |   %   |   #   |   $   |   !   |  F11  |  F12  |
 * `-----------------------+-------+-------+-------+-------+-------|  |-------+-------+-------+-------+-------+-----------------------'
 *                         | T_DEF |  ???  |  ???  | M_SYS |  CTRL |  |  ???  | H_NAV |  ???  |  ???  |  ???  |
 *                         `---------------------------------------'  `---------------------------------------'
 */
	[SYS] = LAYOUT(
	    _______, SS_1   , SS_2   , SS_3   , SS_4   , SS_5   , /*=====, =======, =======, ======*/ KC_PGUP, KC_HOME, KC_UP  , KC_END , S_PGUP , KC_DEL ,
	    _______, S_1    , S_2    , S_3    , S_4    , S_5    , /*=====, =======, =======, ======*/ KC_PGDN, SH_8   , SH_2   , KC_RABK, KC_MINS, KC_BSPC,
        XXXXXXX, KC_LGUI, KC_LSFT, KC_LCTL, KC_LALT, XXXXXXX, _______, _______, _______, XXXXXXX, SH_5   , SH_3   , SH_4   , SH_1   , KC_F11 , KC_F12 ,
        /*=====, =======, ======*/ TG(DEF), XXXXXXX, XXXXXXX, _______, _______, XXXXXXX, _______, XXXXXXX, XXXXXXX, XXXXXXX  /*=====, =======, ======*/
    ),

/*
 * Media
 * ,-----------------------------------------------.                                  ,-----------------------------------------------.
 * |  XXX  |  XXX  |  XXX  |  XXX  |  XXX  |  XXX  |                                  |  XXX  |  XXX  |  XXX  |  XXX  |  XXX  |  XXX  |
 * |-------+-------+-------+-------+-------+-------|                                  |-------+-------+-------+-------+-------+-------|
 * |  XXX  |  XXX  |  XXX  |  XXX  |  XXX  |  XXX  |                                  |  XXX  |      |   󰝞   |   󰝝   |     |  XXX  |
 * |-------+-------+-------+-------+-------+-------+---------------.  ,---------------+-------+-------+-------+-------+-------+-------|
 * |  XXX  |  XXX  |  XXX  |  XXX  |  XXX  |  XXX  |  XXX  |  XXX  |  |  XXX  |  XXX  |  XXX  |   󰒮   |      |   󰒭   |     |      |
 * `-----------------------+-------+-------+-------+-------+-------|  |-------+-------+-------+-------+-------+-----------------------'
 *                         |  XXX  |  XXX  |  XXX  |  ___  |  ___  |  |  ___  |  ___  |  ___  |  XXX  |  ___  |
 *                         `---------------------------------------'  `---------------------------------------'
 */
	[MED] = LAYOUT(
	    XXXXXXX, XXXXXXX, XXXXXXX, XXXXXXX, XXXXXXX, XXXXXXX, /*=====, =======, =======, ======*/ XXXXXXX, XXXXXXX, XXXXXXX, XXXXXXX, XXXXXXX, XXXXXXX,
	    XXXXXXX, XXXXXXX, XXXXXXX, XXXXXXX, XXXXXXX, XXXXXXX, /*=====, =======, =======, ======*/ XXXXXXX, KC_MUTE, KC_VOLD, KC_VOLU, KC_BRIU, XXXXXXX,
	    XXXXXXX, XXXXXXX, XXXXXXX, XXXXXXX, XXXXXXX, XXXXXXX, XXXXXXX, XXXXXXX, XXXXXXX, XXXXXXX, XXXXXXX, KC_MPRV, KC_MPLY, KC_MNXT, KC_BRID, KC_PSCR,
        /*=====, =======, ======*/ XXXXXXX, XXXXXXX, XXXXXXX, _______, _______, _______, _______, _______, XXXXXXX, _______  /*=====, =======, ======*/
    ),

/*
 * Navigacja
 * ,-----------------------------------------------.                                  ,-----------------------------------------------.
 * |  ESC  |  XXX  |  XXX  |  XXX  |  XXX  |  XXX  |                                  |  PGUP |  HOME |      |  END  |  XXX  |  DEL  |
 * |-------+-------+-------+-------+-------+-------|                                  |-------+-------+-------+-------+-------+-------|
 * |  TAB  | SUPER |  ALT  | SHIFT |  CTRL |  RCLC |                                  | PGDOWN|      |      |      | CTRL /|  BACK |
 * |-------+-------+-------+-------+-------+-------+---------------.  ,---------------+-------+-------+-------+-------+-------+-------|
 * | T_DEF |  F12  |  ALT  |  XXX  |  XXX  |  XXX  | T_DEF |  XXX  |  |  XXX  |  XXX  |  XXX  |  XXX  |  XXX  |  XXX  | CTRL .| RETURN|
 * `-----------------------+-------+-------+-------+-------+-------|  |-------+-------+-------+-------+-------+-----------------------'
 *                         |  XXX  |  XXX  |  XXX  | H_SYS |  XXX  |  |  XXX  |  XXX  |  XXX  |  XXX  |  XXX  |
 *                         `---------------------------------------'  `---------------------------------------'
 */
// Nawigxacja
    [NAV] = LAYOUT(
        KC_ESC , XXXXXXX, XXXXXXX, XXXXXXX, XXXXXXX, XXXXXXX, /*=====, =======, =======, ======*/ KC_PGUP, KC_HOME, KC_UP  , KC_END , XXXXXXX, KC_DEL ,
        KC_TAB , KC_LGUI, KC_LALT, KC_LSFT, KC_LCTL, KC_APP , /*=====, =======, =======, ======*/ KC_PGDN, KC_LEFT, KC_DOWN, KC_RGHT, C_SLSH , KC_BSPC,
        TG(DEF), KC_F12 , O_ALT  , XXXXXXX, XXXXXXX, XXXXXXX, TG(DEF), XXXXXXX, XXXXXXX, _______, XXXXXXX, XXXXXXX, _______, XXXXXXX, C_DOT  , KC_ENT ,
        /*=====, =======, ======*/ XXXXXXX, XXXXXXX, XXXXXXX, MO(SYS), XXXXXXX, XXXXXXX, _______, _______, XXXXXXX, XXXXXXX  /*=====, =======, ======*/
    ),

/*
 * Numbad
 * ,-----------------------------------------------.                                  ,-----------------------------------------------.
 * |  ESC  |  XXX  |  XXX  |  XXX  |  XXX  |  XXX  |                                  |  XXX  |   7   |   8   |   9   |  XXX  |  DEL  |
 * |-------+-------+-------+-------+-------+-------|                                  |-------+-------+-------+-------+-------+-------|
 * |  TAB  |   +   |   *   |   -   |   /   |  XXX  |                                  |  XXX  |   4   |   5   |   6   |  XXX  | BACK  |
 * |-------+-------+-------+-------+-------+-------+---------------.  ,---------------+-------+-------+-------+-------+-------+-------|
 * |  XXX  |  XXX  |   ,   |   .   |   =   |  XXX  |  XXX  |  XXX  |  |  XXX  |  XXX  |  XXX  |   1   |   2   |   3   |  XXX  | RETURN|
 * `-----------------------+-------+-------+-------+-------+-------|  |-------+-------+-------+-------+-------+-----------------------'
 *                         |  XXX  |  XXX  |  XXX  |  ___  |  ___  |  |  ___  |  ___  | H_NAV |  XXX  |  ___  |
 *                         `---------------------------------------'  `---------------------------------------'
 */
    // Numpad
	[NPD] = LAYOUT(
	    KC_ESC , XXXXXXX, XXXXXXX, XXXXXXX, XXXXXXX, XXXXXXX, /*=====, =======, =======, ======*/ XXXXXXX, KC_7   , KC_8   , KC_9   , XXXXXXX, KC_DEL ,
	    KC_TAB , KC_PPLS, KC_PAST, KC_PMNS, KC_PSLS, XXXXXXX, /*=====, =======, =======, ======*/ KC_0   , KC_4   , KC_5   , KC_6   , XXXXXXX, KC_BSPC,
	    XXXXXXX, XXXXXXX, KC_COMM, KC_DOT , KC_PEQL, XXXXXXX, XXXXXXX, _______, XXXXXXX, XXXXXXX, XXXXXXX, KC_1   , KC_2   , KC_3   , XXXXXXX, KC_ENT ,
        /*=====, =======, ======*/ XXXXXXX, XXXXXXX, XXXXXXX, XXXXXXX, XXXXXXX, _______, MO(NAV), KC_SPC , KC_0   , KC_PDOT  /*=====, =======, ======*/
    ),

/*
 * Specjalne
 * ,-----------------------------------------------.                                  ,-----------------------------------------------.
 * |   `   |   1   |   2   |   3   |   4   |   5   |                                  |   6   |   7   |   8   |   9   |   0   |      |
 * |-------+-------+-------+-------+-------+-------|                                  |-------+-------+-------+-------+-------+-------|
 * |   /   |   \   |   :   |   <   |   >   |  XXX  |                                  |   *   |   (   |   {   |   [   |   -   |  BACK |
 * |-------+-------+-------+-------+-------+-------+---------------.  ,---------------+-------+-------+-------+-------+-------+-------|
 * |  SFT  |  XXX  |   "   |   "   |   |   |   &   | T_DEF |  XXX  |  |  XXX  |  XXX  |   @   |   )   |   }   |   ]   |   =   | RETURN|
 * `-----------------------+-------+-------+-------+-------+-------|  |-------+-------+-------+-------+-------+-----------------------'
 *                         |  XXX  |  XXX  |  ALT  |  ___  |  ___  |  |  ___  |  ___  |  ___  |  XXX  |  ___  |
 *                         `---------------------------------------'  `---------------------------------------'
 */
	[SPC] = LAYOUT(
        KC_GRV , KC_1   , KC_2   , KC_3   , KC_4   , KC_5   , /*=====, =======, =======, ======*/ KC_6   , KC_7   , KC_8   , KC_9   , KC_0   , KC_PSCR,
	    KC_SLSH, KC_BSLS, KC_COLN, KC_LT  , KC_GT  , XXXXXXX, /*=====, =======, =======, ======*/ SH_8   , KC_LPRN, KC_LCBR, KC_LBRC, KC_MINS, KC_BSPC,
	    KC_LSFT, XXXXXXX, KC_QUOT, KC_DQUO, S_BSLS , KC_AMPR, TG(DEF), XXXXXXX, XXXXXXX, XXXXXXX, SH_2   , KC_RPRN, KC_RCBR, KC_RBRC, KC_EQL , KC_ENT ,
	    /*=====, =======, ======*/ XXXXXXX, XXXXXXX, KC_LALT, XXXXXXX, XXXXXXX, XXXXXXX, _______, _______, XXXXXXX, XXXXXXX  /*=====, =======, ======*/
    ),

/*
 * numerki
 * ,-----------------------------------------------.                                  ,-----------------------------------------------.
 * |  ESC  |  SS1  |  SS2  |  SS3  |  SS4  |  SS5  |                                  |  PGUP |  HOME |      |  END  | S_PGUP|  DEL  |
 * |-------+-------+-------+-------+-------+-------|                                  |-------+-------+-------+-------+-------+-------|
 * |   0   |   1   |   2   |   3   |   4   |   5   |                                  |   6   |   7   |   8   |   9   |   0   |  BACK |
 * |-------+-------+-------+-------+-------+-------+---------------.  ,---------------+-------+-------+-------+-------+-------+-------|
 * |  XXX  |   _   |   $   |  CTRL |  ALT  |  XXX  |  XXX  |  XXX  |  |  XXX  |  XXX  |  XXX  | H_MED | H_NAV | H_NPD | SHIFT |  F12  |
 * `-----------------------+-------+-------+-------+-------+-------|  |-------+-------+-------+-------+-------+-----------------------'
 *                         | T_DEF |  XXX  |  XXX  |  ___  |  ___  |  |  ___  |  ___  |  ___  |  XXX  |  ___  |
 *                         `---------------------------------------'  `---------------------------------------'
 */
    [NUM] = LAYOUT(
        _______, SS_1   , SS_2   , SS_3   , SS_4   , SS_5   , /*=====, =======, =======, ======*/ KC_PGUP, KC_HOME, KC_UP  , KC_END , S_PGUP , KC_DEL ,
        KC_0   , KC_1   , KC_2   , KC_3   , KC_4   , KC_5   , /*=====, =======, =======, ======*/ KC_6   , KC_7   , KC_8   , KC_9   , KC_0   , KC_BSPC,
        XXXXXXX, SH_MINS, SH_4   , KC_LCTL, KC_LALT, XXXXXXX, _______, _______, _______, XXXXXXX, XXXXXXX, MO(MED), MO(NAV), MO(NPD), KC_LSFT, KC_F12 ,
        /*=====, =======, ======*/ TG(DEF), XXXXXXX, XXXXXXX, _______, _______, XXXXXXX, _______, XXXXXXX, XXXXXXX, XXXXXXX  /*=====, =======, ======*/
    ),
};

#define TAP_FRAMES 2
#define ANIM_SIZE 1024
#define ANIM_FRAME_RATIO 2.5

uint32_t anim_timer = 0;
uint32_t curr_anim_duration = 300;
uint32_t anim_sleep = 100;
uint8_t current_tap_frame = 0;

// logo to second side
static void render_logo(void) {
    static const char PROGMEM tap[TAP_FRAMES][ANIM_SIZE] = {
        {
        // 'tap_left', 128x64px
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x80, 0xc0, 0x80, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x80, 0xc0, 0xe0, 0xe0, 0xf0,
        0xf0, 0xf0, 0xfe, 0xff, 0xff, 0xff, 0xfe, 0xfc, 0xfc, 0xf8, 0xf8, 0xf8, 0xf8, 0xf8, 0xf0, 0xf0,
        0xf0, 0xe0, 0xe0, 0xe0, 0xe0, 0xc0, 0xc0, 0x80, 0x80, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0xc0, 0xc0,
        0xe0, 0xc0, 0x00, 0x00, 0x03, 0xff, 0xff, 0xff, 0xff, 0xff, 0x7f, 0x0e, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x80, 0xe0, 0xf0, 0xf8, 0xfc, 0xfe, 0xff, 0xff, 0xff, 0xff, 0x7f, 0x3f, 0x1f,
        0x1f, 0x3f, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,
        0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0x7f, 0x3f, 0x3f, 0x3e, 0x3e, 0x3e, 0x7e,
        0xfe, 0xfe, 0xfe, 0xfe, 0xfe, 0x7c, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x70, 0xe0, 0xc0, 0x80, 0x00, 0x00, 0x80, 0xf0, 0xf8,
        0xfc, 0x02, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x30, 0x70, 0x70, 0x70, 0x60, 0x60, 0x60, 0xe0, 0xe0, 0xe0, 0xe1, 0xc3, 0xc3,
        0xc7, 0xc7, 0xcf, 0xc4, 0xc0, 0x81, 0x8f, 0x8f, 0x8f, 0x83, 0x80, 0x00, 0x00, 0x80, 0xe0, 0xf8,
        0xfc, 0xfe, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0x7f, 0x7f, 0x7f, 0x7f, 0x7c, 0x7c,
        0xfc, 0xfc, 0xff, 0xff, 0xf1, 0xf3, 0xf3, 0xf3, 0xe3, 0xe7, 0xe7, 0xe7, 0xff, 0xff, 0xff, 0xff,
        0xff, 0xe1, 0xe0, 0xe0, 0xe1, 0xf3, 0xff, 0x03, 0x00, 0x00, 0xfc, 0xff, 0xff, 0xfe, 0xfc, 0xf8,
        0xf0, 0xc1, 0x03, 0x0f, 0x3f, 0xfc, 0xf8, 0xe0, 0xc0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x30, 0xe0, 0xe0, 0xc3, 0x9f, 0xff, 0xfe, 0xfe, 0xff, 0xff, 0x3f,
        0x01, 0x80, 0xe0, 0xf0, 0x38, 0x08, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xfc, 0xfc, 0xfc, 0x7c, 0x7c, 0x7c, 0x38, 0x38, 0x18, 0x80,
        0xc0, 0x41, 0x61, 0x71, 0x71, 0x71, 0x71, 0x71, 0x71, 0x33, 0xe3, 0xe0, 0xe0, 0xe1, 0xe3, 0xe3,
        0xe3, 0xe3, 0xc3, 0xc3, 0x43, 0xc1, 0xc1, 0xc0, 0xc8, 0xcc, 0x8c, 0x8c, 0x8c, 0x8c, 0x8c, 0x9c,
        0x9c, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x39, 0x39, 0x31, 0x31, 0x31, 0x31, 0x31, 0x73, 0x73,
        0x63, 0x63, 0x63, 0x63, 0x63, 0xe3, 0xe7, 0xe0, 0xc0, 0xc0, 0xc7, 0xc7, 0xc7, 0xcf, 0xcf, 0x8f,
        0x8f, 0x8f, 0x8f, 0x88, 0x98, 0x9f, 0x9f, 0x1f, 0x1f, 0x1e, 0x10, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x81, 0x8f, 0x3f, 0x3f, 0x3f, 0x3f, 0x3f, 0x3f, 0x3f, 0x3e,
        0x3f, 0x3f, 0x07, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xf0, 0xd0, 0xd8, 0x9c, 0x9e, 0xba, 0xbb, 0x9b,
        0x9b, 0xa3, 0x23, 0x33, 0x77, 0x37, 0x32, 0x12, 0x44, 0x64, 0x66, 0x6e, 0x66, 0x22, 0x88, 0xcc,
        0xcd, 0xcd, 0xdd, 0xdc, 0xdc, 0xd9, 0x99, 0x4b, 0x03, 0x93, 0xbb, 0xbb, 0xbb, 0x93, 0x03, 0x27,
        0x37, 0x77, 0x77, 0x77, 0x67, 0x27, 0x0f, 0x4f, 0x6f, 0xee, 0x6e, 0x6e, 0x8e, 0xce, 0xce, 0xde,
        0xcc, 0xc4, 0xd4, 0x9c, 0x9c, 0x9c, 0xbc, 0x3c, 0x38, 0xb8, 0x38, 0x18, 0x08, 0x79, 0x79, 0x71,
        0x31, 0x91, 0xf1, 0x01, 0x03, 0x03, 0x03, 0x03, 0x03, 0x03, 0x03, 0x03, 0x07, 0x07, 0x07, 0x07,
        0x06, 0x06, 0x06, 0x0e, 0x00, 0x00, 0x0f, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,
        0xff, 0xff, 0x1f, 0x01, 0x20, 0x38, 0x30, 0x30, 0x30, 0x70, 0x70, 0x70, 0x60, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x83,
        0x83, 0xc3, 0xc3, 0xc3, 0xc3, 0xc3, 0xc7, 0xc7, 0xc7, 0x87, 0x86, 0x86, 0x06, 0x06, 0x0e, 0x0e,
        0x0e, 0x0c, 0x0c, 0x8d, 0x8d, 0x9d, 0xdc, 0xfc, 0xfd, 0x79, 0x39, 0x1b, 0x19, 0x38, 0x3a, 0x3b,
        0x33, 0x33, 0x37, 0x37, 0x73, 0x71, 0x74, 0x76, 0x66, 0x66, 0x66, 0xe2, 0xe8, 0xec, 0xec, 0xcc,
        0xcd, 0xdd, 0xdd, 0xdd, 0xdd, 0x99, 0xc0, 0x90, 0x99, 0xbb, 0x9b, 0xcb, 0xe3, 0xf3, 0x7c, 0x1e,
        0x0f, 0x07, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x07, 0x0f, 0x0f, 0x1f, 0x1f, 0x1f, 0x1f, 0x0f,
        0x0f, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0c, 0x0e, 0x07, 0x03,
        0x01, 0x01, 0x01, 0x00, 0x00, 0x00, 0x01, 0x01, 0x01, 0x01, 0x03, 0x03, 0x03, 0x03, 0x03, 0x03,
        0x07, 0x03, 0x03, 0x03, 0x03, 0x01, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x03, 0x03, 0x01, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        },
                {
        // 'tap_right', 128x64px
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x80, 0xc0, 0xe0, 0xe0, 0xf0,
        0xf0, 0xf0, 0xfe, 0xff, 0xff, 0xff, 0xfe, 0xfe, 0xfc, 0xf8, 0xf8, 0xf8, 0xf8, 0xf8, 0xf8, 0xf0,
        0xf0, 0xf0, 0xe0, 0xe0, 0xe0, 0xe0, 0xc0, 0xc0, 0x80, 0x80, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xf0, 0xf8, 0xf8, 0xf8, 0xf8,
        0xf0, 0xf0, 0xf0, 0xe0, 0xe0, 0xe0, 0xf0, 0xf8, 0xfe, 0xff, 0xff, 0xff, 0xff, 0x7f, 0x3f, 0x1f,
        0x1f, 0x3f, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,
        0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xfe, 0xfe, 0xfe,
        0xfe, 0xfe, 0xfe, 0xfe, 0xfe, 0x38, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x70, 0xe0, 0xc0, 0x80, 0x00, 0x00, 0x80, 0xf0, 0xf8,
        0xfc, 0x02, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x30, 0x70, 0x70, 0x70, 0x60, 0x60, 0x60, 0xe0, 0xe0, 0xe0, 0xe0, 0xc0, 0xc0,
        0xc0, 0xc0, 0xc0, 0xc0, 0xc0, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x81, 0x83, 0x0f, 0x0f, 0x1f,
        0x3f, 0x3f, 0x3f, 0x7f, 0x7f, 0x7f, 0x7f, 0x7f, 0x7f, 0x7f, 0x7f, 0x7f, 0x7f, 0x7f, 0x7c, 0xfc,
        0xfc, 0xfc, 0xff, 0xff, 0xf1, 0xf3, 0xf3, 0xf3, 0xe3, 0xe7, 0xe7, 0xe7, 0xff, 0xff, 0xff, 0xff,
        0xff, 0xe1, 0xe0, 0xe0, 0xe1, 0xf3, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,
        0xff, 0xff, 0xff, 0xff, 0xff, 0xfc, 0xf8, 0xf0, 0xc0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x30, 0xe0, 0xe0, 0xc3, 0x9f, 0xff, 0xfe, 0xfe, 0xff, 0xff, 0x3f,
        0x01, 0x80, 0xe0, 0xf0, 0x38, 0x08, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80,
        0xc0, 0x41, 0x61, 0x71, 0x71, 0x71, 0x71, 0x71, 0x71, 0x33, 0xe3, 0xe3, 0xe3, 0xe3, 0xe3, 0xe3,
        0xe7, 0xe6, 0xc6, 0xc6, 0x46, 0xc6, 0xc6, 0xc6, 0xce, 0xce, 0x8e, 0x8c, 0x8c, 0x8c, 0x8c, 0x9c,
        0x9c, 0x18, 0x18, 0x18, 0x18, 0x18, 0x19, 0x39, 0x31, 0x31, 0x31, 0x31, 0x31, 0x33, 0x73, 0x73,
        0x63, 0x23, 0x03, 0x03, 0xe0, 0xf8, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0x7f, 0x3f, 0x1f,
        0x1f, 0x1f, 0x9f, 0x9f, 0x9f, 0x1f, 0x1f, 0x1f, 0x1f, 0x1e, 0x10, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x81, 0x8f, 0x3f, 0x3f, 0x3f, 0x3f, 0x3f, 0x3f, 0x3f, 0x3e,
        0x3f, 0x3f, 0x07, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xf0, 0xd0, 0xd8, 0x9c, 0x9e, 0xba, 0xbb, 0x9b,
        0x9b, 0xa3, 0x23, 0x33, 0x77, 0x37, 0x32, 0x12, 0x44, 0x64, 0x66, 0x6e, 0x66, 0x22, 0x88, 0xcc,
        0xcd, 0xcd, 0xdd, 0xdc, 0xdc, 0xd9, 0x99, 0x4b, 0x03, 0x93, 0xbb, 0xbb, 0xbb, 0x93, 0x03, 0x27,
        0x37, 0x77, 0x77, 0x77, 0x67, 0x27, 0x0f, 0x4f, 0x6f, 0xee, 0x6e, 0x6e, 0x8e, 0xce, 0xce, 0xde,
        0xcc, 0xc4, 0xd0, 0x90, 0x91, 0x93, 0xb3, 0x33, 0x33, 0xb1, 0x31, 0x18, 0x08, 0x78, 0x78, 0x71,
        0x31, 0x91, 0xf1, 0x01, 0x03, 0x03, 0x83, 0x03, 0x33, 0x73, 0xe3, 0xe3, 0xe7, 0xe7, 0xe7, 0xc7,
        0xc6, 0xc6, 0xc6, 0xce, 0x80, 0x00, 0x0f, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,
        0xff, 0xff, 0x1f, 0x01, 0x20, 0x38, 0x30, 0x30, 0x30, 0x70, 0x70, 0x70, 0x60, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x83,
        0x83, 0xc3, 0xc3, 0xc3, 0xc3, 0xc3, 0xc7, 0xc7, 0xc7, 0x87, 0x86, 0x86, 0x06, 0x06, 0x0e, 0x0e,
        0x0e, 0x0c, 0x0c, 0x8d, 0x8d, 0x9d, 0xdc, 0xfc, 0xfd, 0x79, 0x39, 0x1b, 0x19, 0x38, 0x3a, 0x3b,
        0x33, 0x33, 0x37, 0x37, 0x73, 0x71, 0x74, 0x76, 0x66, 0x66, 0x66, 0xe2, 0xe8, 0xec, 0xec, 0xcc,
        0xcd, 0xdd, 0xdd, 0xdd, 0xdd, 0x99, 0xc0, 0x90, 0x99, 0xbb, 0x9b, 0xcb, 0xe3, 0xf3, 0x7c, 0x1e,
        0x0f, 0x07, 0x01, 0x00, 0x60, 0x7c, 0x7f, 0x7f, 0x7e, 0x78, 0x30, 0x20, 0x01, 0x03, 0x07, 0x0f,
        0x1f, 0x3f, 0x3f, 0x07, 0x01, 0x00, 0x00, 0x00, 0x07, 0x0f, 0x0f, 0x1f, 0x1f, 0x1f, 0x1f, 0x0f,
        0x0f, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0c, 0x0e, 0x07, 0x03,
        0x01, 0x01, 0x01, 0x00, 0x00, 0x00, 0x01, 0x01, 0x01, 0x01, 0x03, 0x03, 0x03, 0x03, 0x03, 0x03,
        0x07, 0x03, 0x03, 0x03, 0x03, 0x01, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x03, 0x03, 0x01, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
        }
    };
    void animation_phase(void) {
        current_tap_frame = (current_tap_frame + 1) % TAP_FRAMES;
        oled_write_raw_P(tap[abs((TAP_FRAMES-1)-current_tap_frame)], ANIM_SIZE);
    }

    if(timer_elapsed32(anim_timer) > curr_anim_duration) {
        anim_timer = timer_read32();
        animation_phase();
    }
    anim_sleep = timer_read32();
}

#ifdef OLED_ENABLE
bool oled_task_user(void) {
    // master side
    if (is_keyboard_master()) {
        // Host Keyboard Layer Status
        oled_write_P(PSTR("Najlepsza klawka \n"), false);
        oled_write_P(PSTR(" \n"), false);
        oled_write_P(PSTR("Warstwa: \n"), false);

        switch (get_highest_layer(layer_state)) {
            case DEF:
                oled_write_P(PSTR("Colemak_dh \n"), false);
                break;
            case SYS:
                    oled_write_P(PSTR("Navigacja systemu \n"), false);
                break;
            case MED:
                oled_write_P(PSTR("Media \n"), false);
                break;
            case NAV:
                oled_write_P(PSTR("Navigacja \n"), false);
                break;
            case NPD:
                oled_write_P(PSTR("123451242 \n"), false);
                break;
            case SPC:
                oled_write_P(PSTR("Specjalne\n"), false);
                break;
            case NUM:
                oled_write_P(PSTR("Numerki\n"), false);
                break;
            default:
                // Or use the write_ln shortcut over adding '\n' to the end of your string
                oled_write_ln_P(PSTR("Teraz to coś popsułeś"), false);
        }

        // Host Keyboard LED Status
        led_t led_state = host_keyboard_led_state();
        oled_write_P(led_state.num_lock ? PSTR("NUM ") : PSTR("    "), false);
        oled_write_P(led_state.caps_lock ? PSTR("CAP ") : PSTR("    "), false);
        oled_write_P(led_state.scroll_lock ? PSTR("SCR ") : PSTR("    "), false);
        oled_write_P(PSTR("\n"), false);
        oled_write_P(PSTR("Dzban_Diego \n"), false);
        return false;
    }else{
        render_logo();
        return false;
    }
}
#endif
